[Unit]
Description="Service file for Monad Execution"
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/monad \
    --chain "$CHAIN" \
    --db /dev/triedb \
    --block_db /home/monad/monad-bft/ledger \
    --statesync /home/monad/monad-bft/statesync.sock \
    --ro_sq_thread_cpu 1 \
    --sq_thread_cpu 2 \
    --log_level INFO
EnvironmentFile=-/home/monad/.env
Restart=no
User=monad
Group=monad
DeviceAllow=/dev/triedb rw
LimitNOFILE=1048576
AllowedCPUs=1-7
CPUAffinity=1,2,3,4,5,6,7
# Hugemem configs below
LimitMEMLOCK=infinity
MemoryDenyWriteExecute=false
#SystemCallFilter=~@memlock
ProtectKernelModules=no
ProtectKernelLogs=no

[Install]
WantedBy=multi-user.target
