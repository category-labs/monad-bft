syntax = "proto3";

package monad_proto.block;

import "basic.proto";
import "quorum_certificate.proto";
import "state_root_hash.proto";
import "timeout.proto";

message ProtoExecutionArtifacts {
  monad_proto.state_root_hash.ProtoStateRootHash parent_hash = 1;
  monad_proto.state_root_hash.ProtoStateRootHash state_root = 2;
  monad_proto.basic.ProtoHash transactions_root = 3;
  monad_proto.basic.ProtoHash receipts_root = 4;
  monad_proto.basic.ProtoBloom logs_bloom = 5;
  monad_proto.basic.ProtoGas gas_used = 6;
}

message ProtoTransactionList {
  bytes data = 1;
}

message ProtoPayload {
  bytes txns = 1;
  ProtoExecutionArtifacts header = 2;
  monad_proto.basic.ProtoSeqNum seq_num = 3;
  bytes beneficiary = 4;
  bytes randao_reveal = 5;
}
message ProtoValidatorAccountability {
    monad_proto.basic.ProtoNodeId validator_id = 1;
    uint32 failure_counter = 2;
    monad_proto.timeout.ProtoTimeoutCertificate latest_failure_certificate = 3;
}

message ProtoBlock {
  monad_proto.basic.ProtoNodeId author = 1;
  monad_proto.basic.ProtoRound round = 2;
  ProtoPayload payload = 3;
  monad_proto.quorum_certificate.ProtoQuorumCertificate qc = 4;
  repeated ProtoValidatorAccountability validators_accountability = 5;
}

message ProtoUnverifiedBlock {
  ProtoBlock block = 1;
}
